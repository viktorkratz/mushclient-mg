<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Donnerstag, September 21, 2023, 11:55  -->
<!-- MuClient version 5.01 -->

<!-- Plugin "mg_play_tones" generated by Plugin Wizard -->

<muclient>
<plugin
   name="mg_play_tones"
   author="Viktor Kratz"
   id="1b12e84e75b3614895a073d8"
   language="Lua"
   purpose="Plays a tone if hit points change"
   date_written="2023-09-21 23:54:16"
   requires="5.01"
   version="1.0"
   >

</plugin>

<script>
<![CDATA[
local mg_char_id="267745b27b2f0e42200da929"
local lastHp=0
local hp_announcement_treshold=9
function OnPluginBroadcast (msg, id, name, data)
if(id==mg_char_id and msg==1) then
currentHp=tonumber(GetPluginVariable(mg_char_id,"hp"))
if (currentHp<=(lastHp-hp_announcement_treshold)) or (currentHp >= (lastHp+hp_announcement_treshold)) then
modHp=currentHp % 10
hpSound=((currentHp-modHp)/10)
Note(hpSound)
 world.PlaySound(0,"healthtones\\health"..hpSound..".wav",0,0,0)
lastHp=currentHp
end -- compare if
end -- if
end -- function
]]>
</script>
</muclient>
